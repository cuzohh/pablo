<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pablo</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EðŸŽ¨%3C/text%3E%3C/svg%3E">
    <link rel="alternate icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EðŸŽ¨%3C/text%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #050507;
            --bg-card: rgba(15, 15, 20, 0.8);
            --accent: #8b5cf6;
            --accent-glow: rgba(139, 92, 246, 0.4);
            --green: #10b981;
            --red: #ef4444;
            --text: #e4e4e7;
            --text-dim: #71717a;
            --border: rgba(255, 255, 255, 0.06);
        }

        :root[data-theme="light"] {
            --bg-dark: #f5f5f7;
            --bg-card: rgba(255, 255, 255, 0.9);
            --accent: #7c3aed;
            --accent-glow: rgba(124, 58, 237, 0.2);
            --green: #059669;
            --red: #dc2626;
            --text: #1f2937;
            --text-dim: #6b7280;
            --border: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            text-rendering: optimizeLegibility;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Syne', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.5;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at top right, var(--accent-glow) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom left, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            opacity: 0.5;
            transition: opacity 0.3s ease, background 0.3s ease;
        }

        :root[data-theme="light"] body::before {
            background: radial-gradient(ellipse at top right, rgba(124, 58, 237, 0.12) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom left, rgba(5, 150, 105, 0.1) 0%, transparent 50%);
            opacity: 1;
        }

        /* Animated grid background */
        .grid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(139, 92, 246, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(139, 92, 246, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 0;
            transition: background-image 0.3s ease;
        }

        :root[data-theme="light"] .grid-bg {
            background-image: 
                linear-gradient(rgba(124, 58, 237, 0.06) 1px, transparent 1px),
                linear-gradient(90deg, rgba(124, 58, 237, 0.06) 1px, transparent 1px);
            opacity: 0.8;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(60px, 60px); }
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            top: -200px;
            right: -200px;
            animation: float1 15s ease-in-out infinite;
            transition: background 0.3s ease;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.2) 0%, transparent 70%);
            bottom: -100px;
            left: -100px;
            animation: float2 18s ease-in-out infinite;
            transition: background 0.3s ease;
        }

        :root[data-theme="light"] .orb-2 {
            background: radial-gradient(circle, rgba(5, 150, 105, 0.15) 0%, transparent 70%);
        }

        .orb-3 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.15) 0%, transparent 70%);
            top: 50%;
            left: 50%;
            animation: float3 12s ease-in-out infinite;
            transition: background 0.3s ease;
        }

        :root[data-theme="light"] .orb-3 {
            background: radial-gradient(circle, rgba(220, 38, 38, 0.08) 0%, transparent 70%);
        }

        :root[data-theme="light"] .orb-1 {
            background: radial-gradient(circle, rgba(124, 58, 237, 0.15) 0%, transparent 70%);
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(-50px, 50px) scale(1.1); }
            66% { transform: translate(30px, -30px) scale(0.9); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(80px, -60px) rotate(180deg); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-30%, -70%) scale(1.3); opacity: 0.8; }
        }

        /* Main container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Hero section */
        .hero {
            text-align: center;
            padding: 4rem 0 6rem;
        }

        .logo {
            font-size: 6rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: logoFloat 3s ease-in-out infinite, fadeInUp 1s ease-out;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideOutLeft {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(-50px); }
        }

        @keyframes slideOutRight {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(50px); }
        }

        @keyframes slideInFromRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInFromLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        h1 {
            font-size: clamp(3rem, 10vw, 6rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #fff 0%, var(--accent) 50%, #fff 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 1s ease-out 0.1s both, gradientShift 5s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .tagline {
            font-size: 1.3rem;
            color: var(--text-dim);
            margin-bottom: 1.5rem;
            font-weight: 400;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .trust {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 2.5rem;
            animation: fadeInUp 1s ease-out 0.3s both;
            text-shadow: 0 0 40px var(--accent-glow);
        }

        .status {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            font-size: 0.95rem;
            color: var(--text-dim);
            margin-bottom: 2rem;
            animation: fadeInScale 0.8s ease-out 0.4s both;
            transition: all 0.3s ease;
        }

        .status:hover {
            border-color: var(--accent);
            transform: scale(1.02);
            box-shadow: 0 0 30px var(--accent-glow);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
            box-shadow: 0 0 10px var(--green);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        .description {
            color: var(--text-dim);
            line-height: 1.9;
            max-width: 500px;
            margin: 0 auto 2.5rem;
            font-size: 1.05rem;
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        .links {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .links a {
            color: var(--text);
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .links a:hover::before {
            left: 100%;
        }

        .links a:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
        }

        /* Stats cards */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 4rem 0;
        }

        .stat-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.4s ease;
            animation: fadeInUp 0.8s ease-out both;
        }

        .stat-card:nth-child(1) { animation-delay: 0.7s; }
        .stat-card:nth-child(2) { animation-delay: 0.8s; }
        .stat-card:nth-child(3) { animation-delay: 0.9s; }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px var(--accent-glow);
        }

        .stat-value {
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .stat-card:hover .stat-value {
            transform: scale(1.05);
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-value.positive { color: var(--green); }
        .stat-value.negative { color: var(--red); }
        .stat-value.neutral { color: var(--accent); }

        .stat-label {
            color: var(--text-dim);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .stat-card:hover .stat-label {
            color: var(--text);
            transform: translateY(-2px);
        }

        /* Monthly Recap Section */
        .monthly-recap {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease-out 0.95s both;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .monthly-recap:hover {
            border-color: var(--accent);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3), 0 0 25px var(--accent-glow);
        }

        .recap-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            max-height: 2000px;
            opacity: 1;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        margin-bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 0;
        }

        .monthly-recap.collapsed .recap-stats {
            max-height: 0;
            opacity: 0;
            margin-bottom: 0;
        }

        .recap-toggle-icon {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;
            transform: rotate(180deg);
            font-size: 1.2rem;
            color: var(--text-dim);
        }

        .monthly-recap.collapsed .recap-toggle-icon {
            transform: rotate(0deg);
        }

        .monthly-recap:not(.collapsed) .recap-toggle-icon {
            transform: rotate(180deg);
        }

        .recap-header:hover .recap-toggle-icon {
            color: var(--accent);
        }

        .recap-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
            cursor: pointer;
            transition: margin-bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .monthly-recap.collapsed .recap-header {
            margin-bottom: 0;
        }

        .recap-title {
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .recap-title span {
            animation: bounce 2s ease-in-out infinite 0.3s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .recap-month {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent);
            font-size: 1rem;
            display: inline-block;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .recap-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .recap-stats > div {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .recap-stats > div:hover {
            transform: translateY(-2px);
            border-color: var(--border);
        }

        .recap-stat {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 1.2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .recap-stat:hover {
            background: rgba(139, 92, 246, 0.1);
            transform: translateY(-3px);
        }

        .recap-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
            white-space: nowrap;
        }

        .recap-stat-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .days-bar-container {
            padding: 1.25rem 1.5rem !important;
            text-align: center;
            grid-column: 1 / -1;
            width: 100%;
        }
        
        .days-bar-container .days-bar,
        .days-bar-container .sp500-comparison-bar {
            width: 100%;
            min-height: 12px;
        }

.days-bar-header {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 0.75rem;
            font-weight: 600;
            width: 100%;
        }

        /* Force left and right items to take equal space, creating a perfect center */
        .days-bar-header > span:nth-child(1) {
            flex: 1;
            text-align: left;
            white-space: nowrap;
        }

        .days-bar-header > span:nth-child(3) {
            flex: 1;
            text-align: right;
            white-space: nowrap;
        }

        /* The middle item just sits in the exact center now */
        .days-bar-header > span:nth-child(2) {
            text-align: center;
            padding: 0 10px;
            white-space: nowrap;
            color: var(--text-dim); /* Ensure consistency for the grey text */
        }

        @media (max-width: 768px) {
            .days-bar-header {
                font-size: 0.7rem;
            }
            .days-bar-header > span:nth-child(2) {
                padding: 0 5px;
            }
        }
        .days-bar {
            display: flex;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .days-bar-green {
            background: linear-gradient(90deg, var(--green) 0%, #22c55e 100%);
            transition: width 0.5s ease;
            min-width: 2px;
        }

        .days-bar-red {
            background: linear-gradient(90deg, var(--red) 0%, #ef4444 100%);
            transition: width 0.5s ease;
            min-width: 2px;
        }

        /* S&P 500 Comparison Bar */
        .sp500-comparison-bar {
            display: flex;
            height: 16px;
            border-radius: 8px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
            margin-top: 0.5rem;
        }

        .sp500-bar-pablo,
        .sp500-bar-sp500 {
            height: 100%;
            transition: all 0.5s ease;
            opacity: 0.9;
            min-width: 2px;
        }

        .sp500-bar-pablo.green {
            background: linear-gradient(90deg, var(--green) 0%, #22c55e 100%);
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
        }

        .sp500-bar-pablo.red {
            background: linear-gradient(90deg, var(--red) 0%, #ef4444 100%);
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.4);
        }

        .sp500-bar-sp500.green {
            background: linear-gradient(90deg, var(--green) 0%, #22c55e 100%);
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.3);
        }

        .sp500-bar-sp500.red {
            background: linear-gradient(90deg, var(--red) 0%, #ef4444 100%);
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.3);
        }

        /* Calendar section */
        .calendar-section {
            margin: 5rem 0;
            animation: fadeInUp 1s ease-out 1s both;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .section-title span {
            animation: bounce 2s ease-in-out infinite;
        }

        .month-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .month-nav button {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .month-nav button:hover {
            background: var(--accent);
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .current-month {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            min-width: 180px;
            display: inline-block;
            text-align: center;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .calendar {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            overflow: hidden;
            transition: all 0.4s ease;
            overflow-x: auto;
        }

        .calendar:hover {
            transform: translateY(-4px);
            border-color: var(--accent);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2), 0 0 20px var(--accent-glow);
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .calendar-header span {
            text-align: center;
            color: var(--text-dim);
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 0.5rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .calendar-header span.weekend {
            color: var(--red);
            opacity: 0.6;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            position: relative;
        }

        .calendar-grid.fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        .calendar-grid.fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
            to {
                opacity: 0;
                transform: translateX(-40px) scale(0.95);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid transparent;
        }

        .calendar-day:not(.empty):not(.future):hover {
            background: rgba(139, 92, 246, 0.15);
            border-color: var(--accent);
            transform: scale(1.1);
            z-index: 2;
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .calendar-day.empty {
            background: transparent;
            cursor: default;
        }

        .calendar-day.future {
            color: var(--text-dim);
            opacity: 0.3;
            cursor: default;
        }

        .calendar-day.today {
            border: 2px solid var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        .calendar-day.weekend {
            background: rgba(239, 68, 68, 0.05);
        }

        .calendar-day.weekend:not(.empty):not(.future):hover {
            background: rgba(239, 68, 68, 0.15);
            border-color: var(--red);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        .calendar-day.has-data::after {
            content: '';
            position: absolute;
            bottom: 6px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .calendar-day.has-data.positive::after { background: var(--green); box-shadow: 0 0 8px var(--green); }
        .calendar-day.has-data.negative::after { background: var(--red); box-shadow: 0 0 8px var(--red); }
        .calendar-day.has-data.neutral::after { background: var(--accent); box-shadow: 0 0 8px var(--accent); }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        :root[data-theme="light"] .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
        }

        .modal {
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.95) 0%, rgba(10, 10, 15, 0.98) 100%);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            max-width: 700px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), 0 0 50px var(--accent-glow);
            opacity: 0;
        }

        :root[data-theme="light"] .modal {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 250, 255, 0.95) 100%);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15), 0 0 50px var(--accent-glow);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        /* Modal content animations */
        .modal-header,
        .modal-stat,
        .modal-breakdown-item,
        .modal-pnl-item,
        .modal-trades-title,
        .trade-item,
        .modal-image,
        .modal-notes {
            animation: fadeInUp 0.4s ease-out both;
        }

        .modal-image { animation-delay: 0.05s; }
        .modal-stat:nth-child(1) { animation-delay: 0.1s; }
        .modal-stat:nth-child(2) { animation-delay: 0.15s; }
        .modal-breakdown-item:nth-child(1) { animation-delay: 0.2s; }
        .modal-breakdown-item:nth-child(2) { animation-delay: 0.25s; }
        .modal-breakdown-item:nth-child(3) { animation-delay: 0.3s; }
        .modal-breakdown-item:nth-child(4) { animation-delay: 0.35s; }
        .modal-breakdown-item:nth-child(5) { animation-delay: 0.4s; }
        .modal-breakdown-item:nth-child(6) { animation-delay: 0.45s; }
        .modal-pnl-item:nth-child(1) { animation-delay: 0.5s; }
        .modal-pnl-item:nth-child(2) { animation-delay: 0.55s; }
        .modal-notes { animation-delay: 0.6s; }
        .modal-trades-title { animation-delay: 0.65s; }
        .trade-item:nth-child(1) { animation-delay: 0.7s; }
        .trade-item:nth-child(2) { animation-delay: 0.75s; }
        .trade-item:nth-child(3) { animation-delay: 0.8s; }
        .trade-item:nth-child(4) { animation-delay: 0.85s; }
        .trade-item:nth-child(n+5) { animation-delay: 0.9s; }

        /* Animate modal values */
        .modal-stat-value,
        .modal-breakdown-value,
        .modal-pnl-value {
            animation: fadeInScale 0.5s ease-out both;
        }

        .modal-stat:nth-child(1) .modal-stat-value { animation-delay: 0.15s; }
        .modal-stat:nth-child(2) .modal-stat-value { animation-delay: 0.2s; }
        .modal-breakdown-item:nth-child(1) .modal-breakdown-value { animation-delay: 0.25s; }
        .modal-breakdown-item:nth-child(2) .modal-breakdown-value { animation-delay: 0.3s; }
        .modal-breakdown-item:nth-child(3) .modal-breakdown-value { animation-delay: 0.35s; }
        .modal-breakdown-item:nth-child(4) .modal-breakdown-value { animation-delay: 0.4s; }
        .modal-breakdown-item:nth-child(5) .modal-breakdown-value { animation-delay: 0.45s; }
        .modal-breakdown-item:nth-child(6) .modal-breakdown-value { animation-delay: 0.5s; }
        .modal-pnl-item:nth-child(1) .modal-pnl-value { animation-delay: 0.55s; }
        .modal-pnl-item:nth-child(2) .modal-pnl-value { animation-delay: 0.6s; }

        /* Animate modal breakdown labels and P&L labels */
        .modal-breakdown-label,
        .modal-pnl-label {
            animation: fadeInUp 0.4s ease-out both;
        }

        .modal-breakdown-item:nth-child(1) .modal-breakdown-label { animation-delay: 0.2s; }
        .modal-breakdown-item:nth-child(2) .modal-breakdown-label { animation-delay: 0.25s; }
        .modal-breakdown-item:nth-child(3) .modal-breakdown-label { animation-delay: 0.3s; }
        .modal-breakdown-item:nth-child(4) .modal-breakdown-label { animation-delay: 0.35s; }
        .modal-breakdown-item:nth-child(5) .modal-breakdown-label { animation-delay: 0.4s; }
        .modal-breakdown-item:nth-child(6) .modal-breakdown-label { animation-delay: 0.45s; }
        .modal-pnl-item:nth-child(1) .modal-pnl-label { animation-delay: 0.5s; }
        .modal-pnl-item:nth-child(2) .modal-pnl-label { animation-delay: 0.55s; }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .modal-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            color: var(--accent);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-dim);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .modal-close:hover {
            color: var(--text);
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        .modal-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .modal-stat {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
        }

        .modal-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .modal-stat-label {
            font-size: 0.8rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .modal-image {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        .modal-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .modal-breakdown-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            padding: 0.6rem 0.4rem;
            border-radius: 10px;
            text-align: center;
            overflow: hidden;
        }

        .modal-breakdown-label {
            font-size: 0.6rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.02em;
            margin-bottom: 0.2rem;
            white-space: nowrap;
        }

        .modal-breakdown-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 0.85rem;
            white-space: nowrap;
        }

        .modal-pnl-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .modal-pnl-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
        }

        .modal-pnl-item.loss {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .modal-pnl-item.win {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .modal-pnl-label {
            font-size: 0.75rem;
            color: var(--text-dim);
            text-transform: uppercase;
        }

        .modal-pnl-value {
            font-weight: 700;
            font-size: 1rem;
        }

        .modal-pnl-item.loss .modal-pnl-value { color: var(--red); }
        .modal-pnl-item.win .modal-pnl-value { color: var(--green); }

        .modal-notes {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            color: var(--text-dim);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .modal-trades {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .modal-trades-title {
            font-size: 0.85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .trade-item {
            display: grid;
            grid-template-columns: 55px 55px 55px 1fr;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 0;
            border-bottom: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .trade-item:last-child { border-bottom: none; }

        .trade-time { color: var(--text-dim); }
        .trade-type { font-weight: 600; text-align: center; }
        .trade-type.long { color: var(--green); }
        .trade-type.short { color: var(--red); }
        .trade-risk { color: var(--text-dim); text-align: center; font-size: 0.75rem; }
        .trade-result { text-align: right; font-weight: 600; }
        .trade-result.win { color: var(--green); }
        .trade-result.loss { color: var(--red); }
        .trade-result.be { color: var(--accent); }

        .no-data {
            text-align: center;
            color: var(--text-dim);
            padding: 2rem;
        }

        .no-data-emoji {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }

        .weekend-message {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .weekend-message .highlight {
            color: var(--accent);
            font-weight: 600;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 0;
            color: var(--text-dim);
            font-size: 0.9rem;
            animation: fadeInUp 1s ease-out 1.2s both;
        }

        footer span {
            display: inline-block;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            15% { transform: scale(1.2); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }

        /* Theme Toggle Button - Minimalist */
        .theme-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: transparent;
            border: 1px solid var(--border);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            border-color: var(--text-dim);
            background: rgba(255, 255, 255, 0.03);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        .theme-icon {
            position: absolute;
            width: 14px;
            height: 14px;
            transition: all 0.3s ease;
            color: var(--text-dim);
            opacity: 0.3;
        }

        .moon-icon {
            opacity: 1;
            color: var(--text);
        }

        .sun-icon {
            opacity: 0;
            color: var(--text-dim);
        }

        :root[data-theme="light"] .moon-icon {
            opacity: 0;
            color: var(--text-dim);
        }

        :root[data-theme="light"] .sun-icon {
            opacity: 1;
            color: var(--text);
        }

        /* Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 92, 246, 0.3) transparent;
        }

        :root[data-theme="light"] * {
            scrollbar-color: rgba(124, 58, 237, 0.3) transparent;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        :root[data-theme="light"] ::-webkit-scrollbar-thumb {
            background: rgba(124, 58, 237, 0.3);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }

        :root[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
            background: rgba(124, 58, 237, 0.5);
        }

        ::-webkit-scrollbar-corner {
            background: transparent;
        }

        /* Account Section */
        .account-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease-out 0.65s both;
        }

        .account-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .account-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px var(--accent-glow);
        }

        .account-card .stat-value {
            font-size: 1.5rem;
            transition: color 0.3s ease;
            line-height: 1.3;
        }

        .account-card .stat-label {
            font-size: 0.75rem;
            transition: color 0.3s ease;
        }

        /* Signal Legend */
        .legend {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease-out 0.7s both;
        }

        .legend h3 {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .legend-icon {
            font-size: 1.1rem;
            width: 22px;
            text-align: center;
        }

        .legend-icon.green { color: var(--green); }
        .legend-icon.red { color: var(--red); }
        .legend-icon.orange { color: #f97316; }
        .legend-icon.teal { color: #06b6d4; }

        /* Updates Section */
        .updates-section {
            transition: all 0.4s ease;
        }

        .updates-section:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px var(--accent-glow);
        }

        .updates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .updates-header:hover {
            background: rgba(139, 92, 246, 0.05);
        }

        .updates-toggle-icon {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;
            transform: rotate(180deg);
            font-size: 1.2rem;
            color: var(--text-dim);
        }

        .updates-list {
            max-height: 2000px;
            opacity: 1;
            margin-bottom: 0;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        margin-bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .updates-list.collapsed {
            max-height: 0 !important;
            opacity: 0 !important;
            margin-bottom: 0 !important;
            overflow: hidden;
        }

        .updates-toggle-icon {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;
            transform: rotate(180deg);
            font-size: 1.2rem;
            color: var(--text-dim);
        }

        .updates-section.collapsed .updates-toggle-icon {
            transform: rotate(0deg) !important;
        }

        .updates-header:hover .updates-toggle-icon {
            color: var(--accent);
        }

        /* Disclaimer */
        .disclaimer {
            background: rgba(251, 191, 36, 0.08);
            border: 1px solid rgba(251, 191, 36, 0.25);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
            font-size: 0.85rem;
            color: #fbbf24;
            line-height: 1.6;
            animation: fadeInUp 0.8s ease-out 0.6s both;
        }

        .disclaimer strong {
            color: #fcd34d;
        }

        .disclaimer em {
            font-style: italic;
        }

        /* Disclaimer button hover */
        #disclaimerBtn:hover {
            background: rgba(251, 191, 36, 0.2);
            border-color: rgba(251, 191, 36, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(251, 191, 36, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 2rem 1rem; }
            .hero { padding: 2rem 0 4rem; }
            .logo { font-size: 4rem; }
            .stat-value { font-size: 2rem; }
            .calendar { padding: 1rem; }
            .calendar-day { font-size: 0.8rem; }
            .recap-stats { grid-template-columns: repeat(2, 1fr); }
            .legend-grid { grid-template-columns: 1fr; }
            .account-card .stat-value { font-size: 1.2rem; }
            
            /* Fix calendar header alignment on mobile */
            .calendar-header {
                gap: 0.25rem;
                margin-bottom: 0.75rem;
            }
            
            .calendar-header span {
                font-size: 0.7rem;
                padding: 0.25rem 0.1rem;
                letter-spacing: 0.05em;
            }
            
            .calendar-grid {
                gap: 0.25rem;
            }
            
            /* Fix S&P 500 comparison text overlap on mobile */
            .days-bar-header {
                font-size: 0.7rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .days-bar-header > span:nth-child(2) {
                position: static;
                transform: none;
                left: auto;
                padding: 0;
                background: transparent;
                width: 100%;
                text-align: left;
            }
            
            .days-bar-container {
                padding: 1rem 0.5rem;
            }
            
            /* Fix account stats alignment on mobile */
            .account-stats {
                gap: 1rem;
            }
            
            .account-card {
                padding: 1.25rem 1rem;
            }
            
            .account-card .stat-label {
                font-size: 0.8rem;
            }
            
            /* Fix section headers on mobile */
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .month-nav {
                width: 100%;
                justify-content: center;
            }
            
            .current-month {
                min-width: auto;
                font-size: 1rem;
            }
            
            /* Fix monthly recap header on mobile */
            .recap-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            .recap-title {
                font-size: 1.2rem;
            }
            
            /* Fix updates section on mobile */
            .updates-section {
                padding: 1.5rem 1rem;
            }
            
            .updates-section h3 {
                font-size: 1.3rem;
            }
            
            /* Fix legend on mobile */
            .legend {
                padding: 1.5rem 1rem;
            }
            
            .legend-grid {
                gap: 0.75rem;
            }
            
            .legend-item {
                font-size: 0.85rem;
            }
            
            /* Fix modal on mobile */
            .modal-content {
                padding: 1.5rem 1rem;
                margin: 1rem;
                max-width: calc(100% - 2rem);
            }
            
            .modal-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .modal-stat-value {
                font-size: 1.5rem;
            }
            
            /* Center text elements on mobile */
            .tagline {
                font-size: 1.1rem;
                text-align: center;
            }
            
            .section-title {
                font-size: 1.3rem;
                text-align: center;
            }
            
            /* Fix button alignment */
            #disclaimerBtn {
                width: 100%;
                text-align: center;
            }
            
            /* Fix footer on mobile */
            footer {
                text-align: center;
                padding: 2rem 1rem;
            }
            
            /* Fix hero section on mobile */
            .hero {
                text-align: center;
            }
            
            /* Ensure proper spacing */
            .container > section {
                margin-bottom: 2rem;
            }
            
            /* Fix stat cards grid */
            .stats-grid {
                gap: 1rem;
            }
            
            .stat-card {
                padding: 1.25rem 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="container">
        <!-- Theme Toggle -->
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark/light mode">
            <svg class="theme-icon moon-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg class="theme-icon sun-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        </button>

        <section class="hero">
        <div class="logo">ðŸŽ¨</div>
        <h1>pablo</h1>
        <p class="tagline">A quantitative algorithm for the nasdaq</p>
        <p class="trust">Trust Pablo.</p>

        <div class="status">
            <span class="status-dot"></span>
                System Active â€” Tracking Live
        </div>

        <p class="description">
                A proprietary mean-reversion system designed to catch the highs and lows of the day.
        </p>

        <div class="links">
                <a href="https://github.com/cuzohh/pablo" target="_blank">GitHub</a>
                <a href="https://www.tradingview.com/u/cuzohh/" target="_blank">TradingView</a>
                <a href="#calendar">View Calendar</a>
        </div>
        </section>

        <!-- Disclaimer Button -->
        <div style="text-align: center; margin-bottom: 2rem; animation: fadeInUp 0.8s ease-out 0.6s both;">
            <button id="disclaimerBtn" style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); color: #fbbf24; padding: 0.8rem 1.5rem; border-radius: 12px; cursor: pointer; font-size: 0.9rem; font-family: 'Syne', sans-serif; transition: all 0.3s ease;">
                âš ï¸ View Disclaimers & Important Information
            </button>
        </div>

        <!-- Updates Section -->
        <section class="updates-section" style="background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--border); border-radius: 24px; padding: 2rem; margin-bottom: 3rem; animation: fadeInUp 1s ease-out 0.95s both; transition: all 0.3s ease;">
            <div class="updates-header" id="updatesHeader">
                <h3 class="section-title" style="font-size: 1.5rem; margin: 0; display: flex; align-items: center; gap: 0.8rem;">
                    <span>ðŸ“</span> Algorithm Updates
                </h3>
                <span class="updates-toggle-icon">â–¼</span>
            </div>
            <p style="color: var(--text-dim); margin-bottom: 1.5rem; line-height: 1.6;">
                Significant updates that alter trading behavior are documented here. These changes may affect how historical trades would have been executed.
                <br><br>
                <em>Note: Only major updates are tracked here. Minor updates and refinements occur every day as the algorithm is continuously improved.</em>
            </p>
            <div class="updates-list" id="updatesList" style="display: flex; flex-direction: column; gap: 1rem; overflow: hidden; transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), margin-bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);">
                <div class="update-item" style="background: rgba(255, 255, 255, 0.03); border-left: 3px solid var(--accent); border-radius: 12px; padding: 1.25rem; transition: all 0.3s ease;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 0.5rem;">
                        <span style="font-family: 'JetBrains Mono', monospace; color: var(--accent); font-weight: 600; font-size: 0.9rem;">December 22, 2025</span>
                        <span style="color: var(--text-dim); font-size: 0.85rem;">Entry Logic Update</span>
                    </div>
                    <p style="color: var(--text); line-height: 1.6; margin: 0;">
                        Refined entry validation rules for specific entry levels, adjusting when trades can be taken during certain time windows.
                        Historical trades may have executed differently under previous algorithm versions.
                    </p>
                </div>
                <div class="update-item" style="background: rgba(255, 255, 255, 0.03); border-left: 3px solid var(--accent); border-radius: 12px; padding: 1.25rem; transition: all 0.3s ease;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 0.5rem;">
                        <span style="font-family: 'JetBrains Mono', monospace; color: var(--accent); font-weight: 600; font-size: 0.9rem;">December 15, 2025</span>
                        <span style="color: var(--text-dim); font-size: 0.85rem;">Significant Update</span>
                    </div>
                    <p style="color: var(--text); line-height: 1.6; margin: 0;">
                        Major algorithm updates including entry validation improvements, take profit adjustments, and breakeven logic refinements. 
                        Historical trades may have executed differently under previous algorithm versions.
                    </p>
                </div>
            </div>
        </section>

        <!-- Account Stats -->
        <section class="account-section">
            <div class="account-card">
                <div class="stat-value neutral">$100,000.00</div>
                <div class="stat-label">Starting Balance</div>
        </div>
            <div class="account-card">
                <div class="stat-value positive" id="currentBalance">â€”</div>
                <div class="stat-label">Current Balance</div>
        </div>
            <div class="account-card">
                <div class="stat-value neutral" id="totalPercentReturn">â€”</div>
                <div class="stat-label">Total Percent Return</div>
            </div>
            <div class="account-card">
                <div class="stat-value neutral">0.25%</div>
                <div class="stat-label">Risk Per Trade</div>
            </div>
        </section>

        <!-- Main Stats -->
        <section class="stats">
            <div class="stat-card">
                <div class="stat-value positive" id="winRate">â€”</div>
                <div class="stat-label">Win Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value neutral" id="totalTrades">â€”</div>
                <div class="stat-label">Total Trades</div>
            </div>
            <div class="stat-card">
                <div class="stat-value positive" id="totalPnL">â€”</div>
                <div class="stat-label">Total P&L</div>
            </div>
        </section>

        <!-- Signal Legend -->
        <div class="legend">
            <h3>ðŸ“ Signal Legend</h3>
            <div class="legend-grid">
                <div class="legend-item">
                    <span class="legend-icon green">â–²</span>
                    <span>Green Arrow â€” Long entry</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon red">â–¼</span>
                    <span>Red Arrow â€” Short entry</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon orange">âœ•</span>
                    <span>Orange X â€” Stop loss hit</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon teal">â– </span>
                    <span>Teal Box â€” Moved SL to breakeven</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon teal">âœ•</span>
                    <span>Teal X â€” Hit breakeven</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon green">â—†</span>
                    <span>Green Diamond â€” Took profit</span>
                </div>
            </div>
        </div>

        <section class="calendar-section" id="calendar">
            <div class="section-header">
                <h2 class="section-title"><span>ðŸ“…</span> Trading Calendar</h2>
                <div class="month-nav">
                    <button id="prevMonth">â†</button>
                    <span class="current-month" id="currentMonth"></span>
                    <button id="nextMonth">â†’</button>
                </div>
            </div>

            <!-- Monthly Recap -->
            <div class="monthly-recap collapsed" id="monthlyRecap">
                <div class="recap-header" id="recapHeader">
                    <h3 class="recap-title"><span>ðŸ“Š</span> Monthly Recap</h3>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="recap-month" id="recapMonth"></span>
                        <span class="recap-toggle-icon">â–¼</span>
                    </div>
                </div>
                <div class="recap-stats" id="recapStats">
                    <!-- Filled by JS -->
                </div>
            </div>

            <div class="calendar">
                <div class="calendar-header">
                    <span class="weekend">Sun</span>
                    <span>Mon</span>
                    <span>Tue</span>
                    <span>Wed</span>
                    <span>Thu</span>
                    <span>Fri</span>
                    <span class="weekend">Sat</span>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </section>
    </div>

    <footer>
        Built with a <span>ðŸŒ™</span> terrible sleep schedule.
    </footer>

    <!-- Disclaimer Modal -->
    <div class="modal-overlay" id="disclaimerModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-date">âš ï¸ Disclaimers & Important Information</span>
                <button class="modal-close" id="disclaimerClose">Ã—</button>
            </div>
            <div style="color: var(--text); line-height: 1.8;">
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: var(--accent); margin-bottom: 1rem; font-size: 1.1rem;">Paper Trading Only</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1rem;">
                        Pablo is not placing actual trades. This page documents signals Pablo <em>would have</em> taken. 
                        No contract sizing is calculated â€” risk is set to a fixed 0.25% of account balance per trade, compounding daily.
                        Pablo trades a lower win rate, higher risk-to-reward strategy with tight stop losses. 
                        Pablo may not find a valid entry every day. Trade tracking began <strong>December 8th, 2025</strong>.
                    </p>
                </div>
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: var(--accent); margin-bottom: 1rem; font-size: 1.1rem;">Algorithm Development</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1rem;">
                        Past profits/losses may be misrepresented due to active algorithm development and updates. 
                        The trading strategy is continuously being refined, and significant updates that alter trading behavior are documented in the Updates section.
                        Historical performance should be viewed with this context in mind.
                    </p>
                </div>
                <div>
                    <h3 style="color: var(--accent); margin-bottom: 1rem; font-size: 1.1rem;">Breakeven Note</h3>
                    <p style="color: var(--text-dim);">
                        Breakevens are actually small wins â€” Pablo moves the stop loss to be slightly in profit (typically 1 tick above/below entry). 
                        However, breakevens are excluded from win rate calculations (only wins vs losses are counted). 
                        For P&L tracking purposes, breakevens are treated as $0 (true breakeven) because tracking the tiny profits from each breakeven trade is too tedious. 
                        This means the actual P&L is slightly higher than displayed.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Trade Detail Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-date" id="modalDate"></span>
                <button class="modal-close" id="modalClose">Ã—</button>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Configuration
        const STARTING_BALANCE = 100000;
        const RISK_PERCENT = 0.0025; // 0.25% risk per trade
        const RISK_PER_TRADE = STARTING_BALANCE * RISK_PERCENT; // $250 at start, scales with balance
        
        // S&P 500 monthly returns (year-month format: "YYYY-MM")
        const sp500MonthlyReturns = {
            '2025-12': 1.18
        };

        // Funny messages for when Pablo beats S&P 500
        const pabloWinningMessages = [
            "Not even close.",
            "Is it even a competition?",
            "Pablo doesn't play games.",
            "S&P 500 who?",
            "Pablo's just built different.",
            "The market tried. Pablo succeeded.",
            "Pablo's in a league of his own.",
            "S&P 500 catching strays.",
            "Pablo's making it look easy.",
            "The market is shook.",
            "Pablo's running circles around them.",
            "S&P 500 needs to step up.",
            "Pablo's on another level.",
            "The market can't keep up.",
            "Pablo's playing 4D chess.",
            "S&P 500 left in the dust.",
            "Pablo's showing them how it's done.",
            "The market is taking notes.",
            "Pablo's unstoppable.",
            "S&P 500? More like S&P 500 steps behind.",
            "skill issue"
        ];

        // Funny messages for when Pablo loses to S&P 500
        const pabloLosingMessages = [
            "The market got lucky this time.",
            "Pablo's just warming up.",
            "S&P 500 caught a break.",
            "Pablo's playing the long game.",
            "The market got lucky, that's all.",
            "Pablo's just letting them think they're winning.",
            "S&P 500 got one, but Pablo's got the rest.",
            "The market's celebrating too early.",
            "Pablo's just testing their limits.",
            "S&P 500 won the battle, not the war.",
            "Pablo's taking notes for next time.",
            "The market got a participation trophy.",
            "Pablo's just being nice.",
            "S&P 500 got lucky, we'll see next month.",
            "Pablo's letting them have this one.",
            "The market's celebrating prematurely.",
            "Pablo's just building suspense.",
            "S&P 500 got a fluke win.",
            "Pablo's playing possum.",
            "The market won, but at what cost?"
        ];

        // Trading data - P&L calculated from RR (risk-reward ratio)
        // For losses: pnl = -RISK_PER_TRADE (-$250)
        // For wins: pnl = RR Ã— RISK_PER_TRADE (e.g., 5.38 RR = +$1,345)
        // For breakevens: pnl = 0
        // Image URL base - images stored in github.com/cuzohh/pablo/images/
        const IMAGE_BASE = 'https://raw.githubusercontent.com/cuzohh/pablo/main/images/';
        
        // Trading data with recaps
        // Image naming: dec825.png = December 8, 2025
        // Trades only need: time, type, result, rr (for wins)
        // P&L is calculated dynamically based on compounding 0.25% risk
        const tradingData = {
            '2025-12-08': {
                image: 'dec825.png',
                notes: 'Pablo took 3 stop losses before catching a 5.38 RR winner. Patience pays off.',
                trades: [
                    { time: '12:00', type: 'long', result: 'loss' },
                    { time: '01:53', type: 'long', result: 'loss' },
                    { time: '02:56', type: 'long', result: 'loss' },
                    { time: '03:15', type: 'long', result: 'win', rr: 5.38 }
                ]
            },
            // December 9th - No trades taken
            '2025-12-10': {
                image: 'dec1025.png',
                notes: 'Massive day! Pablo caught a 10.08 RR winner and a 5.34 RR winner despite taking 3 losses.',
                trades: [
                    { time: '10:55', type: 'long', result: 'loss' },
                    { time: '11:00', type: 'long', result: 'loss' },
                    { time: '11:06', type: 'long', result: 'win', rr: 10.08 },
                    { time: '03:04', type: 'short', result: 'loss' },
                    { time: '03:15', type: 'short', result: 'be' },
                    { time: '03:34', type: 'short', result: 'win', rr: 5.34 }
                ]
            },
            '2025-12-11': {
                image: 'dec1125.png',
                notes: 'Clean day. Pablo waited for the perfect setup and nailed a 10.02 RR winner.',
                trades: [
                    { time: '09:56', type: 'long', result: 'win', rr: 10.02 }
                ]
            },
            '2025-12-12': {
                image: 'dec1225.png',
                notes: 'Rough day. Pablo took 3 stop losses and 2 breakevens. No winners today.',
                trades: [
                    { time: '04:54', type: 'long', result: 'be' },
                    { time: '10:07', type: 'long', result: 'loss' },
                    { time: '10:54', type: 'long', result: 'loss' },
                    { time: '01:01', type: 'long', result: 'be' },
                    { time: '02:06', type: 'long', result: 'loss' }
                ]
            },
            '2025-12-15': {
                image: 'dec1525.png',
                notes: 'Mixed day with a big 10.24 RR winner early, but struggled in the afternoon with multiple losses.',
                trades: [
                    { time: '09:01', type: 'short', result: 'loss' },
                    { time: '09:32', type: 'short', result: 'win', rr: 10.24 },
                    { time: '12:52', type: 'long', result: 'be' },
                    { time: '02:41', type: 'long', result: 'be' },
                    { time: '03:23', type: 'long', result: 'loss' },
                    { time: '03:41', type: 'long', result: 'loss' },
                    { time: '03:50', type: 'long', result: 'loss' },
                    { time: '03:57', type: 'long', result: 'win', rr: 0.74 }
                ]
            },
            '2025-12-16': {
                image: 'dec1625.png',
                notes: 'Clean single trade. Pablo waited for the perfect setup and nailed a 10.12 RR winner.',
                trades: [
                    { time: '02:44', type: 'long', result: 'win', rr: 10.12 }
                ]
            },
            '2025-12-17': {
                image: 'dec1725.png',
                notes: 'Started strong with a 10.7 RR winner, but struggled through the day with multiple losses.',
                trades: [
                    { time: '07:50', type: 'short', result: 'win', rr: 10.7 },
                    { time: '10:50', type: 'long', result: 'loss' },
                    { time: '11:08', type: 'long', result: 'loss' },
                    { time: '11:50', type: 'long', result: 'be' },
                    { time: '01:51', type: 'long', result: 'loss' }
                ]
            },
            '2025-12-18': {
                image: 'dec1825.png',
                notes: 'Tough day with multiple losses, but managed to close with a 2 RR winner.',
                trades: [
                    { time: '09:31', type: 'short', result: 'be' },
                    { time: '12:52', type: 'short', result: 'loss' },
                    { time: '02:40', type: 'short', result: 'loss' },
                    { time: '03:34', type: 'short', result: 'win', rr: 2.0 }
                ]
            },
            '2025-12-19': {
                image: 'dec1925.png',
                notes: 'Started with a massive 10.12 RR winner early morning, but struggled through the rest of the day.',
                trades: [
                    { time: '03:52', type: 'short', result: 'loss' },
                    { time: '04:53', type: 'short', result: 'win', rr: 10.12 },
                    { time: '09:30', type: 'short', result: 'loss' },
                    { time: '10:51', type: 'short', result: 'loss' },
                    { time: '11:51', type: 'short', result: 'loss' }
                ]
            },
            '2025-12-22': {
                image: 'dec2225.png',
                notes: 'Tough start with a breakeven and two losses, but Pablo caught a 2.82 RR winner to end the day positive.',
                trades: [
                    { time: '03:05', type: 'short', result: 'be' },
                    { time: '05:02', type: 'short', result: 'loss' },
                    { time: '07:52', type: 'short', result: 'loss' },
                    { time: '09:28', type: 'short', result: 'win', rr: 2.82 }
                ]
            }
        };
        
        // Calculate running balances with INTRADAY compounding
        // Risk is recalculated after each trade based on current balance
        function calculateDailyBalances() {
            const sortedDates = Object.keys(tradingData).sort();
            const balances = {};
            let runningBalance = STARTING_BALANCE;
            
            sortedDates.forEach(dateStr => {
                const startBalance = runningBalance;
                const tradeDetails = []; // Store each trade's risk and P&L
                
                // Calculate each trade with intraday compounding
                const dayData = tradingData[dateStr];
                if (dayData && dayData.trades) {
                    dayData.trades.forEach(trade => {
                        const tradeRisk = runningBalance * RISK_PERCENT;
                        let tradePnL = 0;
                        
                        if (trade.result === 'loss') {
                            tradePnL = -tradeRisk;
                            runningBalance -= tradeRisk;
                        } else if (trade.result === 'win' && trade.rr) {
                            tradePnL = tradeRisk * trade.rr;
                            runningBalance += tradePnL;
                        }
                        // breakevens don't change balance
                        
                        tradeDetails.push({ risk: tradeRisk, pnl: tradePnL });
                    });
                }
                
                balances[dateStr] = { 
                    startBalance: startBalance,
                    endBalance: runningBalance,
                    trades: tradeDetails
                };
            });
            
            return balances;
        }
        
        const dailyBalances = calculateDailyBalances();

        // Weekend jokes for Pablo
        const weekendJokes = [
            "Pablo doesn't work weekends. He's busy painting masterpieces. ðŸŽ¨",
            "Even algorithms need a break. Pablo is recharging his batteries. ðŸ”‹",
            "Weekend vibes only. Pablo is sipping virtual margaritas on a beach. ðŸ–ï¸",
            "Markets are closed, but Pablo's confidence is always open. ðŸ˜Ž",
            "Pablo took the weekend off to practice his victory dance. ðŸ’ƒ",
            "No trades on weekends. Pablo is busy counting his fictional millions. ðŸ’°",
            "Pablo believes in work-life balance. Mostly life on weekends. ðŸ§˜",
            "Markets closed = Pablo's spa day. Don't disturb the genius. ðŸ§–",
            "Pablo is meditating on his secret sauce. Very zen. ðŸ•¯ï¸",
            "Weekend mode: Pablo is rewatching his greatest hits. All green candles. ðŸ“º",
            "Sir, this is a Wendy's. Markets are closed. ðŸ”",
            "Pablo said no. Touch grass instead. ðŸŒ¿",
            "Bro really tried to trade on a weekend. ðŸ’€"
        ];

        // Calculate stats for a day (with INTRADAY compounding)
        function calculateDayStats(dayData, dateStr) {
            if (!dayData || !dayData.trades || dayData.trades.length === 0) return null;
            
            const dayBalance = dailyBalances[dateStr] || { startBalance: STARTING_BALANCE, trades: [] };
            const tradeDetails = dayBalance.trades || [];
            
            let wins = 0;
            let losses = 0;
            let breakevens = 0;
            let totalPnL = 0;
            let lossTotal = 0;
            let winTotal = 0;

            dayData.trades.forEach((trade, i) => {
                const detail = tradeDetails[i] || { risk: STARTING_BALANCE * RISK_PERCENT, pnl: 0 };
                
                if (trade.result === 'win') {
                    wins++;
                    winTotal += detail.pnl;
                    totalPnL += detail.pnl;
                } else if (trade.result === 'loss') {
                    losses++;
                    lossTotal += detail.pnl;
                    totalPnL += detail.pnl;
                } else {
                    breakevens++;
                }
            });

            // Calculate win rate excluding breakevens (only wins vs losses)
            const tradesForWinRate = wins + losses;
            const winRate = tradesForWinRate > 0 ? Math.round((wins / tradesForWinRate) * 100) : 0;
            const totalTrades = dayData.trades.length;
            
            // Use starting risk for display (first trade's risk)
            const displayRisk = tradeDetails.length > 0 ? tradeDetails[0].risk : STARTING_BALANCE * RISK_PERCENT;

            return { wins, losses, breakevens, totalPnL, totalTrades, winRate, dayRisk: displayRisk, lossTotal, winTotal, tradeDetails };
        }

        // Calculate overall stats from all trading data (with compounding)
        function calculateOverallStats() {
            let totalTrades = 0;
            let wins = 0;
            let losses = 0;
            let totalPnL = 0;
            
            const sortedDates = Object.keys(tradingData).sort();
            const lastDate = sortedDates[sortedDates.length - 1];
            const currentBalance = lastDate && dailyBalances[lastDate] 
                ? dailyBalances[lastDate].endBalance 
                : STARTING_BALANCE;
            
            totalPnL = currentBalance - STARTING_BALANCE;

            Object.values(tradingData).forEach(day => {
                if (day.trades) {
                    day.trades.forEach(trade => {
                        totalTrades++;
                        // Only count wins and losses for win rate (breakevens excluded)
                        if (trade.result === 'win') wins++;
                        else if (trade.result === 'loss') losses++;
                    });
                }
            });

            // Calculate win rate excluding breakevens (only wins vs losses)
            const tradesForWinRate = wins + losses;
            const winRate = tradesForWinRate > 0 ? Math.round((wins / tradesForWinRate) * 100) : 0;
            const currentRisk = currentBalance * RISK_PERCENT;
            
            return { winRate, totalTrades, totalPnL, currentBalance, currentRisk };
        }

        // Calculate monthly stats
        function calculateMonthlyStats(year, month) {
            let totalTrades = 0;
            let wins = 0;
            let losses = 0;
            let breakevens = 0;
            let totalPnL = 0;
            let tradingDays = 0;
            let greenDays = 0;
            let redDays = 0;
            let totalRR = 0;
            let winCount = 0;

            Object.entries(tradingData).forEach(([dateStr, dayData]) => {
                const date = new Date(dateStr + 'T12:00:00');
                if (date.getFullYear() === year && date.getMonth() === month && dayData.trades) {
                    const dayStats = calculateDayStats(dayData, dateStr);
                    if (dayStats) {
                        tradingDays++;
                        totalTrades += dayStats.totalTrades;
                        wins += dayStats.wins;
                        losses += dayStats.losses;
                        breakevens += dayStats.breakevens;
                        totalPnL += dayStats.totalPnL;
                        if (dayStats.totalPnL > 0) greenDays++;
                        else if (dayStats.totalPnL < 0) redDays++;
                        
                        // Calculate total RR for averaging
                        dayData.trades.forEach(t => {
                            if (t.result === 'win' && t.rr) {
                                totalRR += t.rr;
                                winCount++;
                            }
                        });
                    }
                }
            });

            // Calculate win rate excluding breakevens (only wins vs losses)
            const tradesForWinRate = wins + losses;
            const winRate = tradesForWinRate > 0 ? Math.round((wins / tradesForWinRate) * 100) : 0;
            const avgPerTrade = totalTrades > 0 ? Math.round(totalPnL / totalTrades) : 0;
            const avgRR = winCount > 0 ? (totalRR / winCount).toFixed(2) : 0;

            return { totalTrades, wins, losses, breakevens, totalPnL, winRate, tradingDays, greenDays, redDays, avgPerTrade, avgRR };
        }

        // Animate counting up
        function animateValue(id, start, end, suffix, className, isCurrency = false) {
            const el = document.getElementById(id);
            if (!el) return;
            
            const duration = 1500;
            const startTime = performance.now();
            
            el.className = 'stat-value ' + className;

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 4);
                const current = start + (end - start) * easeProgress;
                
                if (isCurrency) {
                    el.textContent = (current >= 0 ? '+$' : '-$') + Math.abs(current).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    el.textContent = Math.round(current) + suffix;
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    if (isCurrency) {
                        el.textContent = (end >= 0 ? '+$' : '-$') + Math.abs(end).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                    } else {
                        el.textContent = end + suffix;
                    }
                }
            }
            
            requestAnimationFrame(update);
        }

        // Update overall stats display
        function updateOverallStats() {
            const stats = calculateOverallStats();
            
            animateValue('winRate', 0, stats.winRate, '%', stats.winRate >= 50 ? 'positive' : 'negative');
            animateValue('totalTrades', 0, stats.totalTrades, '', 'neutral');
            animateValue('totalPnL', 0, stats.totalPnL, '', stats.totalPnL >= 0 ? 'positive' : 'negative', true);
            
            // Calculate monthly percent return
            function getMonthlyStartBalance() {
                const sortedDates = Object.keys(tradingData).sort();
                if (sortedDates.length === 0) return STARTING_BALANCE;
                
                const lastDate = sortedDates[sortedDates.length - 1];
                const lastDateObj = new Date(lastDate + 'T12:00:00');
                const lastYear = lastDateObj.getFullYear();
                const lastMonth = lastDateObj.getMonth();
                
                // Find the first day of the current month
                const firstDayOfMonth = new Date(lastYear, lastMonth, 1);
                const firstDayStr = `${lastYear}-${String(lastMonth + 1).padStart(2, '0')}-01`;
                
                // Check if we have data for the first day of the month
                if (dailyBalances[firstDayStr]) {
                    return dailyBalances[firstDayStr].startBalance;
                }
                
                // If not, find the last day before this month
                let monthStartBalance = STARTING_BALANCE;
                for (let i = sortedDates.length - 1; i >= 0; i--) {
                    const dateStr = sortedDates[i];
                    const dateObj = new Date(dateStr + 'T12:00:00');
                    const dateYear = dateObj.getFullYear();
                    const dateMonth = dateObj.getMonth();
                    
                    // If this date is from a previous month, use its end balance
                    if (dateYear < lastYear || (dateYear === lastYear && dateMonth < lastMonth)) {
                        if (dailyBalances[dateStr]) {
                            monthStartBalance = dailyBalances[dateStr].endBalance;
                        }
                        break;
                    }
                }
                
                return monthStartBalance;
            }
            
            // Update current balance
            const balanceEl = document.getElementById('currentBalance');
            if (balanceEl) {
                const duration = 1500;
                const startTime = performance.now();
                const startVal = STARTING_BALANCE;
                const endVal = stats.currentBalance;
                
                balanceEl.className = 'stat-value ' + (endVal >= STARTING_BALANCE ? 'positive' : 'negative');
                
                const totalPercentEl = document.getElementById('totalPercentReturn');
                
                function updateBalance(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeProgress = 1 - Math.pow(1 - progress, 4);
                    const current = startVal + (endVal - startVal) * easeProgress;
                    balanceEl.textContent = '$' + current.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                    
                    // Update total percent return
                    if (totalPercentEl) {
                        const totalPercent = ((current - STARTING_BALANCE) / STARTING_BALANCE) * 100;
                        totalPercentEl.className = 'stat-value ' + (totalPercent >= 0 ? 'positive' : 'negative');
                        totalPercentEl.textContent = `${totalPercent >= 0 ? '+' : ''}${totalPercent.toFixed(2)}%`;
                    }
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateBalance);
                    } else {
                        balanceEl.textContent = '$' + endVal.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                        // Final percent returns
                        if (totalPercentEl) {
                            const finalTotalPercent = ((endVal - STARTING_BALANCE) / STARTING_BALANCE) * 100;
                            totalPercentEl.className = 'stat-value ' + (finalTotalPercent >= 0 ? 'positive' : 'negative');
                            totalPercentEl.textContent = `${finalTotalPercent >= 0 ? '+' : ''}${finalTotalPercent.toFixed(2)}%`;
                        }
                        
                        // Update monthly recap to refresh S&P 500 comparison
                        const sortedDates = Object.keys(tradingData).sort();
                        if (sortedDates.length > 0) {
                            const lastDate = sortedDates[sortedDates.length - 1];
                            const lastDateObj = new Date(lastDate + 'T12:00:00');
                            updateMonthlyRecap(lastDateObj.getFullYear(), lastDateObj.getMonth());
                        }
                    }
                }
                requestAnimationFrame(updateBalance);
            }
        }

       // Update monthly recap display
        function updateMonthlyRecap(year, month) {
            try {
                const stats = calculateMonthlyStats(year, month);
                const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                               'July', 'August', 'September', 'October', 'November', 'December'];
                
                const recapMonthEl = document.getElementById('recapMonth');
                if (recapMonthEl) {
                    const expectedText = `${months[month]} ${year}`;
                    if (recapMonthEl.textContent !== expectedText && 
                        !recapMonthEl.classList.contains('slide-out-left') && 
                        !recapMonthEl.classList.contains('slide-out-right') &&
                        !recapMonthEl.classList.contains('slide-in-left') &&
                        !recapMonthEl.classList.contains('slide-in-right')) {
                        recapMonthEl.textContent = expectedText;
                    }
                }
                
                // Calculate monthly return for this month
                const yearMonth = `${year}-${String(month + 1).padStart(2, '0')}`;
                const sortedDates = Object.keys(tradingData).sort();
                let monthlyReturn = null;
                let monthlyStartBalance = STARTING_BALANCE;
                
                // Find first day of this month
                const firstDayOfMonth = `${year}-${String(month + 1).padStart(2, '0')}-01`;
                if (dailyBalances[firstDayOfMonth]) {
                    monthlyStartBalance = dailyBalances[firstDayOfMonth].startBalance;
                } else {
                    // Find last day before this month
                    for (let i = sortedDates.length - 1; i >= 0; i--) {
                        const dateStr = sortedDates[i];
                        const dateObj = new Date(dateStr + 'T12:00:00');
                        const dateYear = dateObj.getFullYear();
                        const dateMonth = dateObj.getMonth();
                        
                        if (dateYear < year || (dateYear === year && dateMonth < month)) {
                            if (dailyBalances[dateStr]) {
                                monthlyStartBalance = dailyBalances[dateStr].endBalance;
                            }
                            break;
                        }
                    }
                }
                
                // Find last day of this month
                let monthlyEndBalance = monthlyStartBalance;
                for (let i = sortedDates.length - 1; i >= 0; i--) {
                    const dateStr = sortedDates[i];
                    const dateObj = new Date(dateStr + 'T12:00:00');
                    const dateYear = dateObj.getFullYear();
                    const dateMonth = dateObj.getMonth();
                    
                    if (dateYear === year && dateMonth === month) {
                        if (dailyBalances[dateStr]) {
                            monthlyEndBalance = dailyBalances[dateStr].endBalance;
                        }
                        break;
                    }
                }
                
                if (monthlyEndBalance !== monthlyStartBalance) {
                    monthlyReturn = ((monthlyEndBalance - monthlyStartBalance) / monthlyStartBalance) * 100;
                }
                
                const recapStats = document.getElementById('recapStats');
                if (!recapStats) {
                    console.error('recapStats element not found');
                    return;
                }
                recapStats.innerHTML = `
                <div class="recap-stat" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <div class="recap-stat-value" style="color: ${stats.totalPnL >= 0 ? 'var(--green)' : 'var(--red)'}">
                        ${stats.totalPnL >= 0 ? '+' : '-'}$${Math.abs(stats.totalPnL).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}
                    </div>
                    <div class="recap-stat-label">Month P&L</div>
                </div>
                <div class="recap-stat">
                    <div class="recap-stat-value" style="color: ${stats.winRate >= 50 ? 'var(--green)' : 'var(--red)'}">
                        ${stats.winRate}%
                    </div>
                    <div class="recap-stat-label">Win Rate</div>
                </div>
                <div class="recap-stat">
                    <div class="recap-stat-value" style="color: var(--green)">${stats.avgRR}</div>
                    <div class="recap-stat-label">Avg RR</div>
                </div>
                <div class="recap-stat">
                    <div class="recap-stat-value" style="color: var(--accent)">${stats.totalTrades}</div>
                    <div class="recap-stat-label">Trades</div>
                </div>
                <div class="recap-stat">
                    <div class="recap-stat-value" style="color: var(--green)">${stats.wins}</div>
                    <div class="recap-stat-label">Wins</div>
                </div>
                <div class="recap-stat">
                    <div class="recap-stat-value" style="color: var(--red)">${stats.losses}</div>
                    <div class="recap-stat-label">Losses</div>
                </div>
                `;
                
                // Add the days bar if there are trading days (spans full width at bottom)
                if (stats.tradingDays > 0) {
                    const greenPercent = (stats.greenDays / stats.tradingDays) * 100;
                    const redPercent = (stats.redDays / stats.tradingDays) * 100;
                    
                    recapStats.innerHTML += `
                        <div class="recap-stat days-bar-container" style="grid-column: 1 / -1;">
                            <div class="days-bar-header">
                                <span style="color: var(--green)">${stats.greenDays} Green</span>
                                <span style="color: var(--text-dim); text-align: center;">${stats.tradingDays} Days</span>
                                <span style="color: var(--red)">${stats.redDays} Red</span>
                            </div>
                            <div class="days-bar">
                                <div class="days-bar-green" style="width: ${greenPercent}%"></div>
                                <div class="days-bar-red" style="width: ${redPercent}%"></div>
                            </div>
                        </div>
                    `;
                }
                
                // Add S&P 500 comparison bar
                if (monthlyReturn !== null && sp500MonthlyReturns[yearMonth] !== undefined) {
                    const sp500Return = sp500MonthlyReturns[yearMonth];
                    const vsSp500 = monthlyReturn - sp500Return;
                    const absDifference = Math.abs(vsSp500);
                    let winLossMessage = "";
                    if (vsSp500 > 0) {
                        winLossMessage = `Pablo's winning by ${absDifference.toFixed(2)}%`;
                    } else if (vsSp500 < 0) {
                        winLossMessage = `Pablo's losing by ${absDifference.toFixed(2)}%`;
                    } else {
                        winLossMessage = "Pablo's tied with the S&P 500";
                    }
                    const funnyMessage = vsSp500 > 0 
                        ? pabloWinningMessages[Math.floor(Math.random() * pabloWinningMessages.length)]
                        : vsSp500 < 0 
                        ? pabloLosingMessages[Math.floor(Math.random() * pabloLosingMessages.length)]
                        : '';
                    
                    const pabloColor = vsSp500 > 0 ? 'var(--green)' : vsSp500 < 0 ? 'var(--red)' : (monthlyReturn >= 0 ? 'var(--green)' : 'var(--red)');
                    const sp500Color = sp500Return >= 0 ? 'var(--green)' : 'var(--red)';
                    const pabloColorClass = vsSp500 > 0 ? 'green' : vsSp500 < 0 ? 'red' : (monthlyReturn >= 0 ? 'green' : 'red');
                    const sp500ColorClass = sp500Return >= 0 ? 'green' : 'red';
                    
                    // Normalization logic for bars
                    const absPablo = Math.abs(monthlyReturn);
                    const absSp500 = Math.abs(sp500Return);
                    const totalAbs = absPablo + absSp500;
                    
                    let pabloWidth = 50;
                    let sp500Width = 50;
                    
                    if (totalAbs > 0.01) {
                        pabloWidth = (absPablo / totalAbs) * 100;
                        sp500Width = (absSp500 / totalAbs) * 100;
                    }
                    
                    recapStats.innerHTML += `
                        <div class="recap-stat days-bar-container" style="grid-column: 1 / -1;">
                            <div class="days-bar-header">
                                <span style="color: ${pabloColor}; font-weight: 600;">Pablo ${monthlyReturn >= 0 ? '+' : ''}${monthlyReturn.toFixed(2)}%</span>
                                <span style="color: var(--text-dim); text-align: center;">vs</span>
                                <span style="color: ${sp500Color}; font-weight: 600;">S&P 500 ${sp500Return >= 0 ? '+' : ''}${sp500Return.toFixed(2)}%</span>
                            </div>
                            <div class="sp500-comparison-bar">
                                <div class="sp500-bar-pablo ${pabloColorClass}" style="width: ${pabloWidth}%;"></div>
                                <div class="sp500-bar-sp500 ${sp500ColorClass}" style="width: ${sp500Width}%;"></div>
                            </div>
                            <div style="margin-top: 0.75rem; font-size: 0.875rem; font-weight: 500; color: ${pabloColor}; text-align: center;">${winLossMessage}</div>
                            ${funnyMessage ? `<div style="margin-top: 0.5rem; font-size: 0.75rem; font-style: italic; opacity: 0.8; color: var(--text-dim); text-align: center;">${funnyMessage}</div>` : ''}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error updating monthly recap:', error);
            }
        }

        // Format currency for display (2 decimal places)
        function formatPnL(value) {
            const sign = value >= 0 ? '+' : '';
            return `${sign}$${Math.abs(value).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`;
        }

        // Calendar logic
        let currentDate = new Date();
        let monthDirection = null; // Track direction for animation (null = no animation)
        const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                       'July', 'August', 'September', 'October', 'November', 'December'];

        function animateMonthText(element, direction) {
            if (!element || !direction) return;
            
            // Remove any existing animation classes
            element.classList.remove('slide-out-left', 'slide-out-right', 'slide-in-left', 'slide-in-right');
            
            // Add slide out animation
            if (direction === 'prev') {
                element.classList.add('slide-out-right');
            } else {
                element.classList.add('slide-out-left');
            }
            
            // After slide out, change text and slide in
            setTimeout(() => {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                element.textContent = `${months[month]} ${year}`;
                
                // Remove slide out, add slide in
                element.classList.remove('slide-out-left', 'slide-out-right');
                if (direction === 'prev') {
                    element.classList.add('slide-in-left');
                } else {
                    element.classList.add('slide-in-right');
                }
                
                // Remove animation class after animation completes
                setTimeout(() => {
                    element.classList.remove('slide-in-left', 'slide-in-right');
                    // Reset monthDirection after animation completes
                    monthDirection = null;
                }, 300);
            }, 150);
        }

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthLabel = document.getElementById('currentMonth');
            
            if (!grid || !monthLabel) {
                console.error('Calendar elements not found');
                return;
            }
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Update month text (with animation if direction is set)
            if (monthDirection) {
                const direction = monthDirection;
                animateMonthText(monthLabel, direction);
                // Also update recap month with animation
                const recapMonthLabel = document.getElementById('recapMonth');
                if (recapMonthLabel) {
                    animateMonthText(recapMonthLabel, direction);
                }
                // Reset monthDirection after starting animations (so it doesn't re-animate)
                monthDirection = null;
            } else {
                monthLabel.textContent = `${months[month]} ${year}`;
                // Also update recap month
                const recapMonthLabel = document.getElementById('recapMonth');
                if (recapMonthLabel) {
                    recapMonthLabel.textContent = `${months[month]} ${year}`;
                }
            }
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            grid.innerHTML = '';
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const empty = document.createElement('div');
                empty.className = 'calendar-day empty';
                grid.appendChild(empty);
            }
            
            // Days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;
                
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayDate = new Date(year, month, day);
                const dayOfWeek = dayDate.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                
                // Mark weekends
                if (isWeekend) {
                    dayEl.classList.add('weekend');
                }
                
                // Check if today
                if (dayDate.toDateString() === today.toDateString()) {
                    dayEl.classList.add('today');
                }
                
                // Check if future
                if (dayDate > today) {
                    dayEl.classList.add('future');
                } else {
                    // Check if has data
                    if (tradingData[dateStr]) {
                        const dayStats = calculateDayStats(tradingData[dateStr], dateStr);
                        if (dayStats) {
                            dayEl.classList.add('has-data');
                            dayEl.classList.add(dayStats.totalPnL > 0 ? 'positive' : dayStats.totalPnL < 0 ? 'negative' : 'neutral');
                        }
                    }
                    
                    dayEl.dataset.date = dateStr;
                    dayEl.dataset.isWeekend = isWeekend;
                    dayEl.addEventListener('click', () => openModal(dateStr, isWeekend));
                }
                
                // Staggered animation
                dayEl.style.animationDelay = `${(firstDay + day) * 0.02}s`;
                dayEl.style.animation = 'fadeInScale 0.4s ease-out both';
                
                grid.appendChild(dayEl);
            }
            
            // Update monthly recap stats after calendar is rendered
            updateMonthlyRecap(year, month);
        }

        function openModal(dateStr, isWeekend = false) {
            const overlay = document.getElementById('modalOverlay');
            const dateEl = document.getElementById('modalDate');
            const content = document.getElementById('modalContent');
            
            const date = new Date(dateStr + 'T12:00:00');
            dateEl.textContent = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Weekend message
            if (isWeekend) {
                const joke = weekendJokes[Math.floor(Math.random() * weekendJokes.length)];
                content.innerHTML = `
                    <div class="no-data">
                        <span class="no-data-emoji">ðŸ–ï¸</span>
                        <p class="weekend-message">${joke}</p>
                        <p style="margin-top: 1.5rem; font-size: 0.85rem; color: var(--text-dim);">
                            Markets are closed on weekends.<br>
                            <span class="highlight">Come back Monday!</span>
                        </p>
                    </div>
                `;
                // Add active class with slight delay for calendar day animation
                setTimeout(() => {
                    overlay.classList.add('active');
                }, 100);
                return;
            }
            
            const data = tradingData[dateStr];
            
            if (data && data.trades && data.trades.length > 0) {
                const dayStats = calculateDayStats(data, dateStr);
                const dayRisk = dayStats.dayRisk;
                
                // Calculate best RR
                const bestRR = Math.max(...data.trades.filter(t => t.rr).map(t => t.rr), 0);
                
                // Build trade log with actual intraday P&L
                const tradeDetails = dayStats.tradeDetails || [];
                const tradesHtml = data.trades.map((t, i) => {
                    const detail = tradeDetails[i] || { pnl: 0, risk: dayRisk };
                    const pnl = detail.pnl;
                    const risk = detail.risk;
                    
                    return `
                        <div class="trade-item">
                            <span class="trade-time">${t.time}</span>
                            <span class="trade-type ${t.type}">${t.type.toUpperCase()}</span>
                            <span class="trade-risk">$${Math.round(risk)}</span>
                            <span class="trade-result ${t.result}">${formatPnL(pnl)}</span>
                        </div>
                    `;
                }).join('');
                
                // Build image HTML if available
                const imageHtml = data.image 
                    ? `<img class="modal-image" src="${IMAGE_BASE}${data.image}" alt="Trade Recap">`
                    : '';
                
                // Build notes HTML if available
                const notesHtml = data.notes 
                    ? `<div class="modal-notes">ðŸ“ ${data.notes}</div>`
                    : '';
                
                content.innerHTML = `
                    ${imageHtml}
                    <div class="modal-stats">
                        <div class="modal-stat">
                            <div class="modal-stat-value" style="color: ${dayStats.totalPnL >= 0 ? 'var(--green)' : 'var(--red)'}">
                                ${formatPnL(dayStats.totalPnL)}
                            </div>
                            <div class="modal-stat-label">Day P&L</div>
                        </div>
                        <div class="modal-stat">
                            <div class="modal-stat-value" style="color: ${dayStats.winRate >= 50 ? 'var(--green)' : 'var(--red)'}">
                                ${dayStats.winRate}%
                            </div>
                            <div class="modal-stat-label">Win Rate</div>
                        </div>
                    </div>
                    <div class="modal-breakdown">
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">Start Risk</div>
                            <div class="modal-breakdown-value">$${dayRisk.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}</div>
                        </div>
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">Trades</div>
                            <div class="modal-breakdown-value">${dayStats.totalTrades}</div>
                        </div>
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">Wins</div>
                            <div class="modal-breakdown-value" style="color: var(--green)">${dayStats.wins}</div>
                        </div>
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">Losses</div>
                            <div class="modal-breakdown-value" style="color: var(--red)">${dayStats.losses}</div>
                        </div>
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">BE</div>
                            <div class="modal-breakdown-value">${dayStats.breakevens}</div>
                        </div>
                        ${bestRR > 0 ? `
                        <div class="modal-breakdown-item">
                            <div class="modal-breakdown-label">Best RR</div>
                            <div class="modal-breakdown-value" style="color: var(--green)">+${bestRR.toFixed(2)}</div>
                        </div>
                        ` : ''}
                    </div>
                    <div class="modal-pnl-row">
                        <div class="modal-pnl-item loss">
                            <span class="modal-pnl-label">Losses</span>
                            <span class="modal-pnl-value">${formatPnL(dayStats.lossTotal)}</span>
                        </div>
                        <div class="modal-pnl-item win">
                            <span class="modal-pnl-label">Wins</span>
                            <span class="modal-pnl-value">${formatPnL(dayStats.winTotal)}</span>
                        </div>
                    </div>
                    ${notesHtml}
                    <div class="modal-trades">
                        <div class="modal-trades-title">Trade Log</div>
                        ${tradesHtml}
                    </div>
                `;
            } else {
                // Random messages for days with no trades
                const noTradeMessages = [
                    { emoji: 'ðŸ˜´', text: 'Maybe Pablo was taking a nap.' },
                    { emoji: 'ðŸŽ¨', text: 'Pablo was busy painting masterpieces instead of trading.' },
                    { emoji: 'ðŸ§˜', text: 'Pablo was meditating on market conditions. No valid setups found.' },
                    { emoji: 'â˜•', text: 'Pablo was sipping coffee, waiting for the perfect entry. None came.' },
                    { emoji: 'ðŸ”', text: 'Pablo searched all day but found no valid setups. Patience is key.' },
                    { emoji: 'ðŸ“š', text: 'Pablo was studying the charts. Sometimes the best trade is no trade.' },
                    { emoji: 'ðŸŽ¯', text: 'Pablo was waiting for the perfect setup. Today wasn\'t the day.' },
                    { emoji: 'ðŸŒŠ', text: 'The market waves weren\'t right. Pablo stayed on the beach.' },
                    { emoji: 'ðŸŽ²', text: 'Pablo rolled the dice and decided to sit this one out.' },
                    { emoji: 'ðŸ”®', text: 'Pablo consulted the crystal ball. It said "wait for tomorrow."' },
                    { emoji: 'ðŸŽª', text: 'Pablo was at the circus, watching the market clowns perform.' },
                    { emoji: 'ðŸ–ï¸', text: 'Pablo took a mental health day. Markets can wait.' },
                    { emoji: 'ðŸŽ¸', text: 'Pablo was jamming out. No trades, just vibes.' },
                    { emoji: 'ðŸ§ª', text: 'Pablo was in the lab, perfecting the algorithm. No live trades today.' },
                    { emoji: 'ðŸŽ­', text: 'Pablo was performing on stage. Trading can wait for the encore.' },
                    { emoji: 'ðŸŒ™', text: 'Pablo was stargazing, looking for signals in the cosmos.' },
                    { emoji: 'ðŸŽ®', text: 'Pablo was grinding in a video game. Markets were too boring.' },
                    { emoji: 'ðŸ•', text: 'Pablo was ordering pizza. Sometimes you just need a break.' },
                    { emoji: 'ðŸŽª', text: 'Pablo was at the fair, riding the emotional rollercoaster of patience.' },
                    { emoji: 'ðŸ”‡', text: 'Pablo muted the market noise. Silence is golden.' }
                ];
                
                const randomMessage = noTradeMessages[Math.floor(Math.random() * noTradeMessages.length)];
                
                content.innerHTML = `
                    <div class="no-data">
                        <span class="no-data-emoji">${randomMessage.emoji}</span>
                        <p>No trades recorded for this day.</p>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                            ${randomMessage.text}
                        </p>
                    </div>
                `;
            }
            
            // Add active class with slight delay for calendar day animation
            setTimeout(() => {
                overlay.classList.add('active');
            }, 100);
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }

        // Initialize monthly recap state from localStorage
        function initRecapState() {
            const monthlyRecap = document.getElementById('monthlyRecap');
            if (monthlyRecap) {
                const savedState = localStorage.getItem('monthlyRecapCollapsed');
                if (savedState === 'true') {
                    monthlyRecap.classList.add('collapsed');
                } else {
                    monthlyRecap.classList.remove('collapsed');
                }
            }
        }

        // Initialize updates list state from localStorage
        function initUpdatesState() {
            const updatesList = document.getElementById('updatesList');
            const updatesSection = document.querySelector('.updates-section');
            if (updatesList && updatesSection) {
                const savedState = localStorage.getItem('updatesListCollapsed');
                // Default to collapsed on first visit (when no saved state exists)
                if (savedState === null || savedState === 'true') {
                    updatesList.classList.add('collapsed');
                    updatesSection.classList.add('collapsed');
                } else {
                    updatesList.classList.remove('collapsed');
                    updatesSection.classList.remove('collapsed');
                }
            }
        }

        // Event listeners - wait for DOM to be ready
        function setupEventListeners() {
            // Monthly recap collapse/expand
            const recapHeader = document.getElementById('recapHeader');
            const monthlyRecap = document.getElementById('monthlyRecap');
            if (recapHeader && monthlyRecap) {
                recapHeader.addEventListener('click', () => {
                    monthlyRecap.classList.toggle('collapsed');
                    // Save state to localStorage
                    localStorage.setItem('monthlyRecapCollapsed', monthlyRecap.classList.contains('collapsed'));
                });
            }
            
            // Month navigation
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            if (prevMonthBtn) {
                prevMonthBtn.addEventListener('click', () => {
                    monthDirection = 'prev';
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    renderCalendar();
                });
            }
            if (nextMonthBtn) {
                nextMonthBtn.addEventListener('click', () => {
                    monthDirection = 'next';
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    renderCalendar();
                });
            }

            // Updates list collapse/expand
            const updatesHeader = document.getElementById('updatesHeader');
            const updatesList = document.getElementById('updatesList');
            const updatesSection = document.querySelector('.updates-section');
            if (updatesHeader && updatesList && updatesSection) {
                updatesHeader.addEventListener('click', () => {
                    updatesList.classList.toggle('collapsed');
                    updatesSection.classList.toggle('collapsed');
                    // Save state to localStorage
                    localStorage.setItem('updatesListCollapsed', updatesList.classList.contains('collapsed'));
                    // Force reflow to ensure CSS updates
                    void updatesList.offsetWidth;
                });
            }

            // Disclaimer modal
            const disclaimerBtn = document.getElementById('disclaimerBtn');
            const disclaimerClose = document.getElementById('disclaimerClose');
            const disclaimerModal = document.getElementById('disclaimerModal');
            
            if (disclaimerBtn && disclaimerModal) {
                disclaimerBtn.addEventListener('click', () => {
                    disclaimerModal.classList.add('active');
                });
            }
            
            if (disclaimerClose && disclaimerModal) {
                disclaimerClose.addEventListener('click', () => {
                    disclaimerModal.classList.remove('active');
                });
            }
            
            if (disclaimerModal) {
                disclaimerModal.addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) {
                        disclaimerModal.classList.remove('active');
                    }
                });
            }

            // Trade detail modal
            const modalClose = document.getElementById('modalClose');
            const modalOverlay = document.getElementById('modalOverlay');
            
            if (modalClose) {
                modalClose.addEventListener('click', closeModal);
            }
            
            if (modalOverlay) {
                modalOverlay.addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) closeModal();
                });
            }

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    if (disclaimerModal) {
                        disclaimerModal.classList.remove('active');
                    }
                }
            });
        }

        // Calendar Animation
        function animateCalendarTransition(callback) {
            const grid = document.getElementById('calendarGrid');
            const monthLabel = document.getElementById('currentMonth');
            
            if (grid) {
                grid.classList.add('fade-out');
                if (monthLabel) {
                    monthLabel.style.transition = 'opacity 0.5s ease';
                    monthLabel.style.opacity = '0';
                }
                
                setTimeout(() => {
                    callback();
                    grid.classList.remove('fade-out');
                    grid.classList.add('fade-in');
                    
                    setTimeout(() => {
                        grid.classList.remove('fade-in');
                        if (monthLabel) {
                            monthLabel.style.opacity = '1';
                        }
                    }, 500);
                }, 500);
            } else {
                callback();
            }
        }

        // Theme Toggle
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            // Icons are handled by CSS transitions, no need to update text
        }

        // Initialize theme on load
        initTheme();

        // Theme toggle button
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }

        // Initialize - ensure DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                initRecapState(); // Initialize recap state after DOM is ready
                initUpdatesState(); // Initialize updates list state after DOM is ready
                setupEventListeners();
                renderCalendar();
                setTimeout(updateOverallStats, 800);
            });
        } else {
            initRecapState(); // Initialize recap state if DOM is already ready
            setupEventListeners();
            renderCalendar();
            setTimeout(updateOverallStats, 800);
        }
    </script>
</body>
</html>
